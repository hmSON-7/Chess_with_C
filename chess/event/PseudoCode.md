## 1. 승급(Promotion)

```
(플레이어가 폰 기물을 이동한 상황)
p <- 기물 구조체
이동한 폰의 색상을 확인한다.
IF 백색 플레이어인 경우
    플레이어의 y축 좌표가 적팀 본진인지 확인한다
    본진이 아니면 이벤트를 더 이상 진행하지 않는다 /* return 0 */
    end
ELSE IF 흑색 플레이어인 경우
    플레이어의 y축 좌표가 적팀 본진인지 확인한다
    본진이 아니면 이벤트를 더 이상 진행하지 않는다 /* return 0 */
    end
본진이면 다음 과정을 진행한다
사용자에게 어떤 기물로 승급할 수 있는지 안내한다
while(1)
    newPiece <- 새 기물 구조체
    사용자로부터 어떤 기물로 승급할 것인지 입력을 받는다
    정상적으로 입력한 경우 반복문을 종료한다.
    잘못된 입력일 경우 오류를 안내하고 재입력받는다
    end
새 기물 구조체를 생성한다(폰 기물을 치우고 동일한 위치에 생성)
    새 기물 타입 = 사용자 입력값
    새 기물 색상 = 기존 컬러와 동일
    새 기물 현재 위치 = 기존 위치와 동일
    그 외 데이터는 초기 값을 따른다.
이벤트를 종료한다. /* return 1 */
end
```

---

## 2. 앙파상(En Passant)

```
(플레이어가 폰 기물을 선택한 상황)
p <- 선택한 폰 기물 구조체
board <- 체스판
turn <- 현재 진행하고 있는 턴 수
선택한 폰의 색상과 위치를 확인한다
IF 백색 플레이어이고 현재 y축이 3인 경우
OR 흑색 플레이어이고 현재 y축이 4인 경우
    True : 다음 알고리즘 진행
    False : 이벤트 종료 /* return 0 */
    end
기물의 양쪽에 적 폰이 존재하는 지 확인한다
left <- 기물의 왼쪽 칸
right <- 기물의 오른쪽 칸
IF 왼쪽칸에 적 폰 기물이 존재하는 경우
OR 오른쪽칸에 적 폰 기물이 존재하는 경우
    True : 다음 알고리즘 실행
    opponent <- 적 기물 구조체
    적 폰 기물이 딱 한 번만 이동했는지, 그리고 방금 움직인 건지 확인
    IF 적 폰 기물이 딱 한 번만 이동했는가?
    AND 적 폰 기물이 직전 턴에 움직였는가?
        True : 앙파상 기준 충족
        사용자 입력 함수 실행 후 알고리즘 종료 /* return 1 */
        False : 이벤트 종료  
        end
    False : 이벤트 종료
    end
end
```

---

## 3. 캐슬링(Castling)

```
(플레이어가 킹 기물을 선택한 상황)
p <- 선택한 킹 기물 구조체
board <- 체스판
선택한 킹의 이동 전적을 확인
IF 킹이 한 번이라도 움직였는가?
    TRUE : 이벤트 종료
    END
킹이 안전한 지 확인
IF 현재 킹이 '체크' 상태인가?
    TRUE : 이벤트 종료
    END
킹의 양쪽 방향을 1칸씩 점검한다.
점검하려는 칸에 기물이 존재하는지 확인한다.
IF 기물이 존재하는가?
    FALSE : 다음 칸 점검
    TRUE : 다음 조건 확인
    IF 해당 기물이 '룩'이 아닌 다른 기물인가?
        TRUE : 이벤트 종료
        END
    해당 방향의 룩 기물이 한 번이라도 움직였는지 확인
    ELSE IF '룩' 기물이 한 번이라도 움직였는가?
        TRUE : 이벤트 종료
        END
    해당 방향을 이동 가능 방향으로 추가
    END
사용자에게 캐슬링이 가능함을 알린다.
사용자에게 캐슬링 진행 가능한 방향을 알려주고, 입력을 받는다.
사용자는 입력을 통해 캐슬링 진행 또는 거부를 결정한다.
SWITCH 사용자 선택
    CASE LEFT : 킹은 왼쪽으로 2칸 이동, 룩은 킹의 바로 오른쪽 칸에 배치
    이벤트 완료 및 캐슬링 진행을 알림
    CASE RIGHT : 킹은 오른쪽으로 2칸 이동, 룩은 킹의 바로 왼쪽 칸에 배치
    이벤트 완료 및 캐슬링 진행을 알림
    CASE CANCEL : 이벤트 종료
    END
END
```

---